function applySellerAutosave(){$("#seller-account").find(".autosave").autosave({url:$("#save-seller-url").val(),before:saveSellerBefore,success:saveSellerSuccess,error:saveSellerError})}function saveSellerBefore(a){a.closest("#seller-account").removeClass("error").removeClass("saved").addClass("updating")}function saveSellerSuccess(a,b){b.closest(".asset").removeClass("updating").addClass("saved")}function saveSellerError(a,b){b.closest(".asset").removeClass("updating").addClass("error")}function arrangeAssetForms(){$("#asset-forms .asset").each(function(){var a=$(this).find("#id_ilk").val(),b=$(this).find("#id_asset_id").val();applyData($(this),b,a),applyEvents($(this)),a!=""&&$(this).appendTo("#"+a+"_container")})}function addAssetForms(){$(".asset-container").each(function(){num_forms=0,num_empty_forms=0,$(this).children(".asset").each(function(){$(this).find("#id_asset_id").val()=="none"?num_empty_forms++:num_forms++});if(num_empty_forms==0){new_asset=$("#asset-forms .asset").first().clone(!1);var a=$(this).attr("id").replace("_container",""),b=new_asset.find("#id_asset_id").val();new_asset.appendTo($(this)),applyData(new_asset,b,a),applyEvents(new_asset)}})}function applyData(a,b,c){c!=="product"?a.find(".asset-category").hide():a.find(".asset-category").show(),c!=="artisan"?a.find(".asset-phone").hide():a.find(".asset-phone").show(),unique_div_id=c+"_image_"+COUNTER.toString(),unique_input_id=c+"_image_"+COUNTER.toString(),image_div=a.find(".image"),image_div.attr("id",unique_div_id),image_input=a.find(".image-input"),image_input.attr("id",unique_input_id),a.find(".autosave").attr("data-asset_id",b),a.find("#id_ilk").attr("value",c),a.find(".autosave").attr("data-ilk",c),COUNTER++}function applyEvents(a,b){image_input=a.find(".image-input"),image_div=a.find(".image"),uploader=new fileUploadAction,uploader.apply(image_input,image_div),b=b||!0,b&&(applyAssetAutosave(a),applyAssetDeleteAction(a))}$().ready(function(){COUNTER=1,$("#asset-tabs").children("li").first().addClass("active"),$("#artisan_tab").trigger("click"),applyData($("#seller-account"),"seller","seller"),applyEvents($("#seller-account"),to_assets=!1),applySellerAutosave(),arrangeAssetForms(),addAssetForms()}),$(".asset-tab").click(function(){$(".asset-tab").removeClass("active"),$(this).addClass("active"),$(".asset-container").hide(),asset_ilk=$(this).attr("id").replace("_tab",""),$("#"+asset_ilk+"_container").show()})