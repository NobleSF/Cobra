function addHoverAnimation(a){$(a).hover(function(){navigator.userAgent.match(/(iPhone|iPod|iPad)/i)||$(this).find(".hover-show").each(function(){$(this).show()})},function(){navigator.userAgent.match(/(iPhone|iPod|iPad)/i)||$(this).find(".hover-show").each(function(){$(this).fadeOut()})})}function sortProductsBy(a,b){$(".product-area").hide(),a!="everything"&&(a==b?$("#product-container .product-area").each(function(){$(this).attr("data-parent-category")==a&&$(this).appendTo($("#product-sorting-container"))}):b=="other"?$("#product-container .product-area").each(function(){$(this).attr("data-parent-category")==a&&$(this).attr("data-child-category")==a&&$(this).appendTo($("#product-sorting-container"))}):a!=b&&$("#product-container .product-area").each(function(){$(this).attr("data-parent-category")==a&&$(this).attr("data-child-category")==b&&$(this).appendTo($("#product-sorting-container"))})),$("#product-container .product-area").each(function(){$(this).appendTo($("#product-sorting-container"))});if(b=="everything")$("#product-sorting-container .product-area").each(function(){row_number=Math.floor($(this).attr("data-order")/3),$(this).appendTo($("#product-container .product-row")[row_number])});else{var c=0;$("#product-sorting-container .product-area").each(function(){row_number=Math.floor(c/3),$(this).appendTo($("#product-container .product-row")[row_number]),c++})}$(".lazy-load:lt(5)").trigger("loadnow"),a=="everything"?$(".product-area").show():a==b?$(".product-area[data-parent-category="+a+"]").show():b=="other"?$(".product-area[data-child-category="+a+"]").show():a!=b&&$(".product-area[data-parent-category="+a+"][data-child-category="+b+"]").show()}$(function(){$(".lazy-load").lazyload(800),addHoverAnimation($(".product")),$(".flexslider").flexslider({animation:"slide"})}),$("#search-toolbar .category").on("click",function(){parent_category=$(this).attr("data-parent-category"),$("#search-toolbar .category").removeClass("selected"),child_category=$(this).attr("data-child-category"),$(this).addClass("selected"),$("#search-toolbar .category.child").hide(),$("#search-toolbar .category.child[data-parent-category="+parent_category+"]").show(),$(this).hasClass("child")&&$("#search-toolbar .category.parent[data-child-category="+parent_category+"]").addClass("selected"),sortProductsBy(parent_category,child_category)}),function(a){a.fn.lazyload=function(b){function k(){h=e.filter(function(){var b=a(this),e=c.scrollTop(),f=e+c.height(),g=b.offset().top,h=g+b.height();return h>=e-d&&g<=f+d}),h.trigger("loadnow")}var c=a(window),d=b||0,e=this,f=a("#load-products-url").val(),g,h,i,j;return this.on("loadnow",function(){i=a(this).children(".unloaded").removeClass("unloaded"),i.length&&(j=i.map(function(){return a(this).attr("data-product-id")}).get(),a.ajax({type:"GET",url:f,data:{product_ids:j.join()}}).done(function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=a(".product-area[data-product-id='"+c+"']");a(d).html(b[c]),a(d).addClass("loaded"),addHoverAnimation(a(d).find(".product"))}}).fail(function(){i.addClass("unloaded")}))}),c.scroll(k),c.resize(k),k(),this}}(window.jQuery)