function addHoverAnimation(a){$(a).hover(function(){navigator.userAgent.match(/(iPhone|iPod|iPad)/i)||$(this).find(".hover-show").each(function(){$(this).show()})},function(){navigator.userAgent.match(/(iPhone|iPod|iPad)/i)||$(this).find(".hover-show").each(function(){$(this).fadeOut()})})}function selectCategories(a,b){$("#search-toolbar .category").removeClass("selected"),$("#search-toolbar .category.parent[data-child-category="+a+"]").addClass("selected"),$("#search-toolbar .category.child").hide(),$("#search-toolbar .category.child[data-parent-category="+a+"]").show(),a!==b&&$("#search-toolbar .category.child[data-child-category="+b+"]").addClass("selected")}function sortProductsBy(a,b){$(".product-area").hide(),a!="everything"&&(a==b?$("#product-container .product-area").each(function(){$(this).attr("data-parent-category")==a&&$(this).appendTo($("#product-sorting-container"))}):b=="other"?$("#product-container .product-area").each(function(){$(this).attr("data-parent-category")==a&&$(this).attr("data-child-category")==a&&$(this).appendTo($("#product-sorting-container"))}):a!=b&&$("#product-container .product-area").each(function(){$(this).attr("data-parent-category")==a&&$(this).attr("data-child-category")==b&&$(this).appendTo($("#product-sorting-container"))})),$("#product-container .product-area").each(function(){$(this).appendTo($("#product-sorting-container"))});if(b=="everything")$("#product-sorting-container .product-area").each(function(){row_number=Math.floor($(this).attr("data-order")/3),$(this).appendTo($("#product-container .product-row")[row_number])});else{var c=0;$("#product-sorting-container .product-area").each(function(){row_number=Math.floor(c/3),$(this).appendTo($("#product-container .product-row")[row_number]),c++})}$(".lazy-load:lt(5)").trigger("loadnow"),a=="everything"?$(".product-area").show():a==b?$(".product-area[data-parent-category="+a+"]").show():b=="other"?$(".product-area[data-child-category="+a+"]").show():a!=b&&$(".product-area[data-parent-category="+a+"][data-child-category="+b+"]").show()}$(function(){$(".lazy-load").lazyload(800),parent_category=window.location.hash.split("#")[1],child_category=window.location.hash.split("#")[2]||parent_category,parent_category&&parent_category!=="everything"&&(selectCategories(parent_category,child_category),sortProductsBy(parent_category,child_category)),addHoverAnimation($(".product"))}),$(".button.shop").click(function(){$.scrollTo($("#store").first(),600),$.scrollTo("-=50px",400,{axis:"y"})}),$("#search-toolbar .category").on("click",function(){parent_category=$(this).attr("data-parent-category"),child_category=$(this).attr("data-child-category"),selectCategories(parent_category,child_category),sortProductsBy(parent_category,child_category),state={parent_category:parent_category,child_category:child_category},parent_category===child_category?url_hash="#"+parent_category:url_hash="#"+parent_category+"#"+child_category,history.replaceState(state,"filter",url_hash)}),function(a){a.fn.lazyload=function(b){function k(){h=e.filter(function(){var b=a(this),e=c.scrollTop(),f=e+c.height(),g=b.offset().top,h=g+b.height();return h>=e-d&&g<=f+d}),h.trigger("loadnow")}var c=a(window),d=b||0,e=this,f=a("#load-products-url").val(),g,h,i,j;return this.on("loadnow",function(){i=a(this).children(".unloaded").removeClass("unloaded"),i.length&&(j=i.map(function(){return a(this).attr("data-product-id")}).get(),a.ajax({type:"GET",url:f,data:{product_ids:j.join()}}).done(function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=a(".product-area[data-product-id='"+c+"']");a(d).html(b[c]),a(d).addClass("loaded"),addHoverAnimation(a(d).find(".product"))}}).fail(function(){i.addClass("unloaded")}))}),c.scroll(k),c.resize(k),k(),this}}(window.jQuery),function(a){function c(a){return typeof a=="object"?a:{top:a,left:a}}var b=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0},b.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return/webkit/i.test(navigator.userAgent)||d.compatMode=="BackCompat"?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return typeof e=="object"&&(f=e,e=0),typeof f=="function"&&(f={onAfter:f}),d=="max"&&(d=9e9),f=a.extend({},b.defaults,f),e=e||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=c(f.offset),f.over=c(f.over),this._scrollable().each(function(){function o(a){j.animate(m,e,f.easing,a&&function(){a.call(this,d,f)})}if(d==null)return;var i=this,j=a(i),k=d,l,m={},n=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=c(k);break}k=a(k,this);if(!k.length)return;case"object":if(k.is||k.style)l=(k=a(k)).offset()}a.each(f.axis.split(""),function(a,c){var d=c=="x"?"Left":"Top",e=d.toLowerCase(),p="scroll"+d,q=i[p],r=b.max(i,c);if(l)m[p]=l[e]+(n?0:q-j.offset()[e]),f.margin&&(m[p]-=parseInt(k.css("margin"+d))||0,m[p]-=parseInt(k.css("border"+d+"Width"))||0),m[p]+=f.offset[e]||0,f.over[e]&&(m[p]+=k[c=="x"?"width":"height"]()*f.over[e]);else{var s=k[e];m[p]=s.slice&&s.slice(-1)=="%"?parseFloat(s)/100*r:s}f.limit&&/^\d+$/.test(m[p])&&(m[p]=m[p]<=0?0:Math.min(m[p],r)),!a&&f.queue&&(q!=m[p]&&o(f.onAfterFirst),delete m[p])}),o(f.onAfter)}).end()},b.max=function(b,c){var d=c=="x"?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}(jQuery)