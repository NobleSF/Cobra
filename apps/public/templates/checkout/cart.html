{% extends "base.html" %}
{% load url from future %}

{% block title %}
  Shopping Cart
{% endblock title %}

{% block javascript %}
  <script type="text/javascript" src="{{ STATIC_URL}}public/js/checkout.js"></script>
{% endblock javascript %}

{% block css %}
  <link href="{{ STATIC_URL }}public/css/checkout.css" rel="stylesheet">
{% endblock css %}

{% block content %}
  <div id='head'>
    <h3 id='cart-sentance'>
      You have
      <span class='badge'><h1>{{ cart.count }}</h1></span>
      item{{ cart.count|pluralize }}
      in your Shopping Cart.
    </h3>
    <p id='cart-paragraph' class='hidden'>
      You have
      {% for item in cart %}
        {% if forloop.first %}a
        {% elif forloop.last %} and a
        {% else %}, a
        {% endif %}
        {{ item.product.name }}
        for
        ${{ item.product.display_price }}
      {% endfor %}
      in your cart for a total of
      ${{ cart.summary }}
    </p>
  </div>

  <div class='row-fluid'>
    <div id='cart' class='span8'>
      <div id='items'>
        {% for item in cart %}
          <div id='item_{{ item.id }}' class='thumbnail row-fluid'>
            <div class='photo span4'>
              <a href="{% url 'product' item.product.id %}">
                <img src='{{ item.photo.thumb }}' alt='product photo'>
              </a>
            </div>
            <div class='details span8'>
              <ul>
                <li class='name'>
                  <a href="{% url 'product' item.product.id %}">
                    {{ item.product.name }} by {{ item.product.seller.name }}
                  </a>
                </li>
                <li class='price'>${{ item.product.display_price }}</li>
                <li class='remove'>
                  <a href="{% url 'cart-remove' item.product.id %}">remove</a>
                </li>
              </ul>
            </div>
          </div>
        {% endfor %}
      </div>

      <div id='summary' class='fluid-row'>
        <div class='span5'>
          <ul>
            <li>Shipping</li>
            <li>Total</li>
            <li></li>
          </ul>
        </div>
        <div class='span7'>
          <ul>
            <li class='amount'>0.00</li>
            <li class='amount'>${{ cart.summary }}</li>
            <li>
              <a href="{% url 'home' %}">Continue Shopping</a>
              or
              <button id='checkout' class='btn btn-large btn-success'>
                Checkout
              </button>
            </li>
          </ul>
        </div>
      </div>

      <div id='cart-form' class='hidden'>
        <form id='cart-form'>
          <input type='hidden' id='cart-ajax-url' value="{% url 'cart-save' %}">
          <h3>We'll want to update you on your order progress.</h3>
          {{ cart_form.email }}
          <h3>Where should we ship the goods?</h3>
          {{ cart_form.as_table }}
          <label for='pay-now'></label>
          <button id='pay-now' class='btn btn-large btn-success'>Pay Now</button>
        </form>
      </div>

    </div>

    <div id='information' class='span4'>
      <div class='well'>
        <h4>How much is Shipping?</h4>
        <p>Shipping to anywhere in the US and Europe is free when you order from the website.</p>
      </div>
      <div class='well'>
        <h4>Can the shipping and billing address be different?</h4>
        <p>Yes they can and you will have the opportunity to enter them seperately.</p>
      </div>
      <div class='well'>
        <h4>What is your security policy?</h4>
        <p>Our security is the highest possible, because we permanently delete all your sensitive personal information as soon as your payment is processed so that no one (not even us!) can see it. The only information we keep on file is your shipping address so the artisan knows where to send your order and your email so we can keep you updated on it's progress.</p>
      </div>
    </div>
  </div>

{% endblock content %}
