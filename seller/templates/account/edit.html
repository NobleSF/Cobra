{% extends "base.html" %}
{% block css %}
  <style>
    .hidden_fields, #asset_forms{display: none;}
    .extra{display: none;}
    .description{height: 5em;}

    #artisan_formset, #product_formset, #tool_formset, #material_formset{
      border: 5px solid gray;
    }
    .asset ul{list-style: none; text-align: center}
    .asset ul li{padding: 10px 0 0}

  </style>
{% endblock css%}

{% block javascript %}
  <script type="text/javascript">
    $().ready( function(){
      //assign bootstrap classes
      $('button').addClass('btn');
      $('#asset_tabs').addClass('nav').addClass('nav-tabs');
      $('#asset_tabs').children('li').first().addClass('active');
      $('#artisan_tab').trigger('click');
    });

    $('.asset_tab').click(function(){
      //make this tab active
      $('.asset_tab').removeClass('active');
      $(this).addClass('active');
      //hide all asset containers, then show the right one
      $('.asset_container').hide();
      asset_ilk = $(this).attr('id').replace('_tab','');
      $('#'+asset_ilk+'_container').show();
    })

    $('#title').click(function(){
      $('#seller_form').slideToggle();
    });

  </script>
{% endblock javascript%}

{% block content %}
  {% load url from future %}
  <h1 id='title'>Seller Account</h1>

  {% if form.errors %}
    <p style="color: red;">
      Please correct the error{{ form.errors|pluralize }} below.
    </p>
  {% endif %}

  <form action="" method="post">{% csrf_token %}
    <div id='seller_form'>
      <table>{{ seller_form.as_table }}</table>
      <button type="submit">OK!</button>
    </div>
  </form>

  {% load image_tags %}

  <div id='asset_forms'>
    <h2>Assets</h2>
    {% for asset_form in asset_formset %}
      <form>
        <div id='asset_{{forloop.counter}}' class='asset'>
          <div class='hidden_fields'>
            {{ asset_form.ilk }}
            {{ asset_form.image }}
            {{ asset_form.DELETE }}
          </div>
          <ul>
            <li>
              {% image asset_form.image.value %}
            </li>
            <li>{{ asset_form.name }}</li>
            <li>{{ asset_form.description }}</li>
            <li id='asset_{{forloop.counter}}_category'>
              {{ asset_form.category }}
            </li>
          </ul>
        </div>
      </form>
    {% endfor %}
  </div>

  <ul id='asset_tabs'>
    {% for asset_ilk in asset_ilks %}
      <li id='{{ asset_ilk }}_tab' class='asset_tab'>
        <a href='#'>{{ asset_ilk|title }}{{ 2|pluralize }}</a>
      </li>
    {% endfor %}
  </ul>

  {% for asset_ilk in asset_ilks %}
    <div id='{{ asset_ilk }}_container' class='asset_container'>
      <h1>{{ asset_ilk|title }}{{ 2|pluralize }}</h1>
    </div>
  {% endfor %}


{% endblock content %}
